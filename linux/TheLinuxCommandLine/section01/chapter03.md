# 第三章: Linux系统 #

本章介绍一些在Linux系统中很有帮助的命令:

- ls: 列出目录内容
- file: 确定文件类型
- less: 查看文件内容

## 3.1 ls命令的乐趣 ##

ls命令可能是用户最常使用的命令, 通过ls命令可以查看目录内容, 确定各种重要文件和目录的属性.

```
ls
ls /usr /usr/bin
ls -l
```

### 3.1.1 选项和参数 ###

通常, 命令后面根有一个或多个选项, 带有不同选项的命令其功能也不一样, 命令后面还会根有一个或多个参数, 这些参数是命令作用的对象.

```
command -options arguments
```

大部分命令使用的选项是在单个字符前加上连字符, 如-l. 但是很多命令, 包括GNU项目里的命令也支持在单字前加两个连字符的长选项, 而且很多命令也允许多个短选项连在一起使用.

```
# l选项产生长格式输出, t选项表示以文件修改时间的先后顺序排序
ls -lt

# reverse选项反序输出
ls -lt --reverse
```

ls命令最常用的选项如下表:

| 选项 | 长选项 | 含义 |
|:--:|:--:|:--|
| -a | --all | 列出所有文件, 包括以点号开头的隐藏文件 |
| -d | --directory | 通常如果指定目录则ls命令会列出目录中的内容而不是目录本身, 将此选项和-l选项结合使用可以查看目录的详细信息 |
| -F | --classify | 在每个列出的名字后面加上类型指示符, 例如目录名则加上斜杠 |
| -h | --human-readable | 长格式列出, 以可读方式而不是字节数来显示文件大小 |
| -l |  | 长格式显示结果 |
| -r | --reverse | 反序显示结果, 通常ls命令按照字母升序显示结果 |
| -S |  | 按文件大小对结果排序 |
| -t |  | 按修改时间排序 |

### 3.1.2 进一步了解长列表格式 ###

-l选项使得ls命令以长格式显示结果, 这种格式包含了大量的有用信息.

```
总用量 24
drwxrwxr-x 5 soren soren 4096 2月  19 17:49 docker-app
drwxrwxr-x 3 soren soren 4096 3月  14 21:27 java
drwxrwxr-x 3 soren soren 4096 3月  18 22:23 linux
drwxrwxr-x 2 soren soren 4096 2月  21 20:59 memoryPoolCpp
drwxrwxr-x 7 soren soren 4096 3月  12 14:55 python
-rw-rw-r-- 1 soren soren  152 2月  19 17:49 README.md
```

下表列出文件中的不同字段的含义:

| 字段       | 含义                                                                                                                  |
| :--        | :--                                                                                                                   |
| -rw-r--r-- | 对文件的访问权限. 第一个字符表示文件的类型, [-]表示普通文件, [d]表示目录. 接下来的三个字符表示文件所有者的访问权限, 再接着的三个字符表示文件所属组中成员的访问权限, 最后三个字符表示其他所有人的访问权限 |
| 1 | 文件硬链接数目 |
| root | 文件所有者名称 |
| root | 文件所属组名称 |
| 32059 | 以字节数表示的文件大小 |
| 2014-04-03 11:05 | 上次修改文件的日期和时间 |
| docker-app | 文件名 |

## 3.2 使用file命令确定文件类型 ##

我们可以使用file命令来确定文件类型, 该命令会打印出文件内容的简短说明.

```
file picture.jpg
```

## 3.3 使用less命令查看文件内容 ##

less命令是一种查看文本文件的程序.

```
less filename
```

下表列出了less程序中最常用的键盘命令.

| 命令 | 功能 |
|:--:|:--|
| PAGE UP或b | 后翻一页 |
| PAGE DOWN 或Spacebar | 前翻一页 |
| 向上箭头键 | 向上一行 |
| 向下箭头键 | 向下一行 |
| G | 跳转到文本文件的末尾 |
| 1G或g | 跳转到文本文件的开头 |
| /charecters | 向前查找指定的字符串 |
| n | 向前查找下一个出现的字符串, 这个字符串是之前指定的 |
| h | 显示帮助屏幕 |
| q | 退出less |

## 3.4 快速浏览 ##

有一个已经发布的名为Linux文件系统层次标准的标准阐述了Linux文件系统的布局.

下表列出了一些常用的目录:

| 目录  | 内容                                                                                                                                                |
| :--:  | :--                                                                                                                                                 |
| /     | 根目录                                                                                                                                              |
| /bin  | 包含系统启动和运行所必需的二进制文件, 例如Linux内核, 最初的RAM磁盘映像及启动加载程序                                                                |
| /boot | 有趣的文件, /boot/grub/grub.cfg 或menu.lst 用来配置启动加载程序, /boot/vmlinuz-4.4.0-21-generic 是Linux内核                                         |
| /dev  | 包含设备节点的目录                                                                                                                                  |
| /etc  | 所有系统层面的配置文件, 同时包含shell脚本, /etc/crontab 定义了自动化任务运行的时间, /etc/fstab存储设备以及相关挂载点的列表, /etc/passwd用户帐号列表 |
| /home | 用户的家目录的父目录                                                                                                                                |
| /lib  | 共享库文件, 与windwos系统中的DLL类似                                                                                                                | 
| /lost+found | 当文件系统崩溃时用于恢复分区 |
| /media | 可移除媒体设备的挂载点 |
| /mnt | 在早期的Linux系统中包含手动挂载的可移除的挂载点 |
| /opt | 安装其他可选的软件 |
| /proc | 内核维护的虚拟文件系统, 是内核的窥视孔 |
| /root | root账户的家目录 |
| /sbin | 系统二进制文件, 为超级用户预留的 |
| /tmp | 临时文件的目录, 系统重启时会清空 |
| /usr | 包含普通用户使用的所有程序和相关文件 |
| /usr/bin | Linux发行版安装的可执行程序 |
| /usr/lib | /usr/bin 目录中的程序使用的共享库 |
| /usr/local | 非发行版自带的让系统使用的程序的安装目录, 由源码编译的程序通常安装在这个目录中 |
| /usr/sbin | 系统管理程序 |
| /usr/share | 包含了/usr/bin中的程序中使用的全部共享数据, 包括默认配置文件, 图标, 屏幕背景和音频文件等 |
| /usr/share/doc | 安装在系统中的大部分程序包包含的文档文件, 按软件包来组织分类 |
| /var | 可变数据存储目录, 例如数据库, 假脱机文件, 用户邮件等 |
| /var/log | 日志文件, 最有用的是 /var/log/messages |

## 3.5 符号链接 ##

有些时候我们会看到如下的目录信息:

```
lrwxrwxrwx  1 root root          28 7月  12  2016 yaml2obj-3.8 -> ../lib/llvm-3.8/bin/yaml2obj*
```

该条目的第一个字母是l, 而且看起来像是有两个文件名, 这种特殊的文件叫做符号链接.

## 3.6 硬链接 ##

硬链接同样允许文件有多个名字, 但是硬链接以不同的方法来创建多个文件名.

## 3.7 扩展阅读 ##

- 完整的 Linux 文件系统层次体系标准可通过以下链接找到:

[http://www.pathname.com/fhs/](http://www.pathname.com/fhs/)
